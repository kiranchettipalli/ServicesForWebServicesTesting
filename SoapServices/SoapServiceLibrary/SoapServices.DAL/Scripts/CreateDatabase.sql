DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'SoapServices.DAL.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201601040730056_Initial'
BEGIN
    CREATE TABLE [dbo].[Address] (
        [Id] [int] NOT NULL IDENTITY,
        [StreetLine1] [nvarchar](max),
        [StreetLine2] [nvarchar](max),
        [City] [nvarchar](max),
        [State] [nvarchar](max),
        [Country] [nvarchar](max),
        CONSTRAINT [PK_dbo.Address] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[ContactInfo] (
        [Id] [int] NOT NULL IDENTITY,
        [PrimaryContactNumber] [nvarchar](max) NOT NULL,
        [SecondaryContactNumber] [nvarchar](max),
        [EmailId] [nvarchar](max) NOT NULL,
        [SkypeId] [nvarchar](max),
        [LinkedInId] [nvarchar](max),
        [FacebookId] [nvarchar](max),
        CONSTRAINT [PK_dbo.ContactInfo] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Course] (
        [CourseId] [int] NOT NULL IDENTITY,
        [CourseName] [nvarchar](max),
        [CourseContents] [nvarchar](max),
        CONSTRAINT [PK_dbo.Course] PRIMARY KEY ([CourseId])
    )
    CREATE TABLE [dbo].[Student] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max) NOT NULL,
        [FathersName] [nvarchar](max) NOT NULL,
        [ContactId] [int] NOT NULL,
        [AddressId] [int] NOT NULL,
        CONSTRAINT [PK_dbo.Student] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_ContactId] ON [dbo].[Student]([ContactId])
    CREATE INDEX [IX_AddressId] ON [dbo].[Student]([AddressId])
    ALTER TABLE [dbo].[Student] ADD CONSTRAINT [FK_dbo.Student_dbo.Address_AddressId] FOREIGN KEY ([AddressId]) REFERENCES [dbo].[Address] ([Id]) ON DELETE CASCADE
    ALTER TABLE [dbo].[Student] ADD CONSTRAINT [FK_dbo.Student_dbo.ContactInfo_ContactId] FOREIGN KEY ([ContactId]) REFERENCES [dbo].[ContactInfo] ([Id]) ON DELETE CASCADE
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201601040730056_Initial', N'SoapServices.DAL.Migrations.Configuration',  0x1F8B0800000000000400ED5BCD6EE33610BE17E83B083AB545D64ABC9736B077913A4911347F8892456F0B5A1A3BC452942A52818DA24FD6431FA9AF50527FA6444A96FC977451EC25A6C86F86C38FC3E10CF79FBFFE1E7D5C04C47A8198E1908EED93C1B16D01F5421FD3F9D84EF8ECDD8FF6C70FDF7E33BAF08385F5A9E8F75EF61323291BDBCF9C47A78EC3BC6708101B04D88B4316CEF8C00B0307F9A1333C3EFEC93939714040D802CBB2460F09E53880F487F83909A907114F10B9097D202C6F175FDC14D5BA4501B0087930B6DD10452EC42FD80336383FBB1E5CF88987B8500B912BCA38E689FC615B670423A19E0B64665B88D290A7BD4E9F18B83C0EE9DC8D4403228FCB0844BF19220CF2499DAEBA779DDFF150CECF590D2CA0BC84F130E80978F23E3798531FBE91D9EDD2A0C2A417C2F47C29679D9A756C9FF97E0C8CD9565DD6E984C4B25F67A30F72A823AB3EE0A8E48EA098FC77644D12C29318C614121E237264DD275382BD5F61F9187E013AA60921AAE24275F1ADD2209AEEE33082982F1F60964FE7CAB72DA73ACEA90F2C872963B2995E51FE7E685BB742389A122879A158C5E5610CBF00851871F0EF11E710538901A96535E93559827C00FC1A533829848A26B1DF6CEB062DAE81CEF9F3D8167FDAD6255E805FB4E48A3C512CB6A718C4E304BACB1AEE5DD6249DFBDE27246CBEFFA984C23FC5BB9ECDC8596DBDD60D29DC21471EBFA2B3300EF25DBFFDDED451FFDFA62DB2EE631CA078995BED3609A610EF80109AC66BF80E5E48FD3DE8D12EF6224098ACAC7DC0F97E11027722B85D8E70895FC0BFA207107529C29669187ED9B9A81EFE248925D62E7C88447A55BF91A9B089F7588D3C940FC924CABF0F71640951D24B08D5D86B31CDE58934CD2EA89643FD7F46B5C8DA11B37AFAE84BC49FC50ABC8EF0228A596BE57698FCA2D21BE616BDE079BA766640DB7A00927E67CF38CA6E9F05953F977D2EE3307808C96AC3149F3EBB621B7BD2ACA1F9FB238AE7C0BBABA5047DADAA55FAE9EA299F1B5554FB98D46C7222678C851E4E15AB7A91D25ED5B95E50DF5A63BC8C93CAFC0433858BC091700A4283B1FD8366C166D4622E0A6AB99055D413BBEE52EEE83910E0609D79D9DD7F8298877C9D57C2367EB545782188A51B4044589609BF8629D75D16A61E8E1069D7BD36ACA3AF936A9502EA5FCE21022A65B5AF4517C9CA5ED41528E5D4ECB5CE3C2347E15537BAA97B601D398C1B6227B4336D2305D974377CAB2C344CE5804C342C5117E9CA01730036662E3195894514505CBF8C21D1F9340DEF16A6F0EA49C47E5984C5F283B5CE3329C7055EDD73207CD8CA2BD7BD9BC6D52A864E45139A89B06B81652C6B06CB6E326B00720A9810CA9D598350D647C3591DDC4AAF86B3BD4E99F5A755A9BCAAB746BDF5E79382A3AC6E7D8757E7D9C3069508A1D90E8D4EB4B31BDDD41E26C7A96019D9DAD93A45F052EED45589C2C96A14452DC36928668C6E5014892059296EE42D969B553626EFDCFED9FD20C3703C6648F297DA9692C47D03CDA1F6551AC7874B1C337E8E389A22B9C5267EA0755BE7971A766521BDEE7AF4352D366B3142FE9DD3B05F05C2E0EA73CC4B6180409E16E9DD4BDF34FAC8B40C85088A0D37BD49489280369F5BCDA32B650015A6F26113BC6113DEB00F5E96CE578126861B69BB4669AEBEAA4BDAD4438B22135F51A468D471464E6D99B5235C239916025559DB89D326E7B20F761B0ED3FE44EF02B21FCE9B73EA2A9EB9470FCE35E4CB2B246CE8D35D4A991E5761CBC61EDA16D9EE8A7A4563771C359BAD42A9EDDDD1D484B58AA6B6BFA19D97C58AFBD96D69B4B9C90E330F6CF1727966BAE6E68C99EEF548596A4EC7CADAFBA2AD92CA3AE2EADB9B61441934EE8312C5F5A13F271A47EEC7D5EA14E8BBF895346FD50F281FFA90A9BC585779D478DF6EC65252462A564B2669CF74D4EE07F52EA5F4F29E50BB0F8CF2D87CFD0B282D58CFBAD89630D20BF665A0EE2E198760203B0CDCDFC984E0F4CE5B74B84114CF80F1AC3A620F8F4F86B5F7526FE7ED92C3984FBA3D603A7885074BA3AEADE1F42D81EBEF83E80B8ABD67147F17A0C5F72AE0866F80B6C253DFF96CA998F296673B95AAEF757A606DF326E7EBA05BDB3B974643EEE0EDCA560B5E7B9FB2A59ED537275B29A6BF2BD90A4E7F3BB21F6EEBE1EAA11F63EC85DBFAFB8B6DDD8CE18DC53E56C4182CFE675D4CA705D8F4E9C17680DA73026C7CBD72457D588CED3FD251A7D6D56F65B6D93FB2EE6211529D5AC7D69FDB3F43E82ABE1CD843FCEE0BF0655DE4C0B5712DF9BF59F175A3E2667382795F95CCAFAE886E2A09BE5E89FB35C9D4299FFBAABC7A0BE570BD3AD59008AABFC56A2E6D6757E6B1ED4F43B1DC99CBDCBCEEDDB1EC6D125A29AB76AA8BB794C5CD02FA94CCDB2AE626F4D72BA7D716B952C2EB502E36D599DF6AB5BC99704DF59CFD1BA047415C4F6C090FA1FC0740E19F189EAF20E47F07A4E0557C43D947CEB2F052358D8A2EB518EB0638F285E3388B399E093B89CF9E2049FA5EF51322497A9D9CCA4BDB5DC2A3848B2943302595F2A274756DF2D3AA7F55E7D15D94D601773105A1261653803BFA7382895FEA7D6908F21A20A40FCD437AB9965C86F6F36589741BD28E40B9F94AD7FF0841440418BBA32E7A814D747B62700D73E42D8BFC6433C8FA85A89A7D748ED13C4601CB3156E3C54FC1613F587CF817C9740793073B0000 , N'6.1.3-40302')
END

